(function() {
  var Preview, a, bold, button, div, h1, h2, h3, h4, h5, h6, icon, input, p, span, strong, table, tbody, td, th, thead, tr;

  a = function() {
    var _ref;
    return (_ref = React.DOM).a.apply(_ref, arguments);
  };

  bold = function() {
    var _ref;
    return (_ref = React.DOM).b.apply(_ref, arguments);
  };

  button = function() {
    var _ref;
    return (_ref = React.DOM).button.apply(_ref, arguments);
  };

  div = function() {
    var _ref;
    return (_ref = React.DOM).div.apply(_ref, arguments);
  };

  h1 = function() {
    var _ref;
    return (_ref = React.DOM).h1.apply(_ref, arguments);
  };

  h2 = function() {
    var _ref;
    return (_ref = React.DOM).h2.apply(_ref, arguments);
  };

  h3 = function() {
    var _ref;
    return (_ref = React.DOM).h3.apply(_ref, arguments);
  };

  h4 = function() {
    var _ref;
    return (_ref = React.DOM).h4.apply(_ref, arguments);
  };

  h5 = function() {
    var _ref;
    return (_ref = React.DOM).h5.apply(_ref, arguments);
  };

  h6 = function() {
    var _ref;
    return (_ref = React.DOM).h6.apply(_ref, arguments);
  };

  icon = function() {
    var _ref;
    return (_ref = React.DOM).i.apply(_ref, arguments);
  };

  input = function() {
    var _ref;
    return (_ref = React.DOM).input.apply(_ref, arguments);
  };

  p = function() {
    var _ref;
    return (_ref = React.DOM).p.apply(_ref, arguments);
  };

  span = function() {
    var _ref;
    return (_ref = React.DOM).span.apply(_ref, arguments);
  };

  table = function() {
    var _ref;
    return (_ref = React.DOM).table.apply(_ref, arguments);
  };

  tbody = function() {
    var _ref;
    return (_ref = React.DOM).tbody.apply(_ref, arguments);
  };

  td = function() {
    var _ref;
    return (_ref = React.DOM).td.apply(_ref, arguments);
  };

  th = function() {
    var _ref;
    return (_ref = React.DOM).th.apply(_ref, arguments);
  };

  thead = function() {
    var _ref;
    return (_ref = React.DOM).thead.apply(_ref, arguments);
  };

  tr = function() {
    var _ref;
    return (_ref = React.DOM).tr.apply(_ref, arguments);
  };

  strong = function() {
    var _ref;
    return (_ref = React.DOM).strong.apply(_ref, arguments);
  };

  window.facebookConnect = function() {
    F.connect($('#facebookForm').get(0));
    return false;
  };

  window.uwapi = {
    courseInfo: window.data.courseInfo || {},
    getCourse: function(subject, catalog_number, callback) {
      var course, that;
      course = {};
      that = this;
      return $.getJSON("/course/" + subject + "/" + catalog_number, function(course) {
        if (!course) {
          callback(null);
        }
        console.log(course);
        if (course.prerequisites && course.prerequisites.substr(0, 7) === "Prereq:") {
          course.prerequisites = course.prerequisites.substr(8);
        }
        course.name = getCourseName(course);
        that.courseInfo[course.name] = course;
        return callback(course.name);
      }).fail(function() {
        return callback(null);
      });
    },
    getInfo: function(course) {
      return this.courseInfo[getCourseName(course)];
    }
  };

  window.getCourseName = function(obj) {
    return obj.subject + obj.catalog_number;
  };

  window.calculateTerm = function(startYear, startTerm, i) {
    startYear = startYear + Math.floor((startTerm + i) / 3);
    startTerm = (startTerm + i) % 3;
    switch (startTerm) {
      case 0:
        return startYear + " Winter";
      case 1:
        return startYear + " Spring";
      case 2:
        return startYear + " Fall";
    }
  };

  window.getTermNameArray = function(terms_offered) {
    return terms_offered.map(function(i) {
      switch (i) {
        case "F":
          return "Fall";
        case "W":
          return "Winter";
        default:
          return "Spring";
      }
    });
  };

  window.EditLabel = React.createClass({
    getInitialState: function() {
      return {
        loading: false,
        text: this.props.initialValue
      };
    },
    handleChange: function(e) {
      return this.setState({
        text: e.target.value
      });
    },
    endEdit: function(e) {
      this.setState({
        loading: true
      });
      return $.ajax({
        url: "/save/" + data.coursePlanId + "/",
        type: "post",
        dataType: "json",
        data: {
          name: this.state.text,
          csrfmiddlewaretoken: data.csrf_token
        },
        success: (function(_this) {
          return function(json) {
            if (json.success) {
              return _this.setState({
                loading: false
              });
            } else if (json.name) {
              return _this.setState({
                text: json.name,
                loading: false
              });
            } else {
              return alert("Failed to save");
            }
          };
        })(this),
        error: (function(_this) {
          return function() {
            return alert("Failed to save");
          };
        })(this)
      });
    },
    render: function() {
      var inputProp;
      inputProp = {
        ref: "input",
        className: "form-control editlabel",
        value: this.state.text,
        onChange: this.handleChange,
        onBlur: this.endEdit
      };
      if (this.state.loading) {
        inputProp.disabled = true;
      }
      return input(inputProp);
    }
  });

  Preview = React.createClass({
    getInitialState: function() {
      return {
        top: 0,
        left: 0,
        html: "",
        show: false
      };
    },
    componentDidMount: function() {
      $(window).on('mousemove', this.handleMouseMove);
      window.showPreview = this.showPreview;
      window.showCoursePreview = this.showCoursePreview;
      return window.hidePreview = this.hidePreview;
    },
    componentWillUnmount: function() {
      return $(window).off('mousemove', this.handleMouseMove);
    },
    handleMouseMove: function(e) {
      if (this.state.show) {
        return this.setState({
          top: e.clientY + 20,
          left: e.clientX + 15
        });
      }
    },
    showCoursePreview: (function(_this) {
      return function(course) {
        var html;
        course = uwapi.getInfo(course);
        html = div(null, h3(null, strong(null, course.name), " - ", course.title), p(null, course.description), p(null, strong(null, "Antireq: "), course.antirequisite || "none"), p(null, strong(null, "Prereq: "), course.prerequisites || "none"), p(null, strong(null, "Terms offered: "), getTermNameArray(course.terms_offered).join(", ")));
        return _this.showPreview(html);
      };
    })(this),
    showPreview: function(data) {
      return this.setState({
        html: data,
        show: true
      });
    },
    hidePreview: function() {
      return this.setState({
        show: false
      });
    },
    render: function() {
      return div({
        className: "preview " + (this.state.show ? " show" : ""),
        style: {
          top: this.state.top,
          left: this.state.left
        }
      }, this.state.html);
    }
  });

  $(function() {
    $('body').append($("<div id='preview'></div>"));
    return React.renderComponent(Preview(null), $("#preview").get(0));
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,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LEtBQUssQ0FBQyxlQUFOLENBQXNCLE9BQUEsQ0FBUSxJQUFSLENBQXRCLEVBQXFDLENBQUEsQ0FBRSxVQUFGLENBQWEsQ0FBQyxHQUFkLENBQWtCLENBQWxCLENBQXJDLEVBRkE7RUFBQSxDQUFGLENBdkpBLENBQUE7QUFBQSIsImZpbGUiOiJoZWxwZXJzLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiYSA9IC0+IFJlYWN0LkRPTS5hIGFyZ3VtZW50cy4uLlxuYm9sZCA9IC0+IFJlYWN0LkRPTS5iIGFyZ3VtZW50cy4uLlxuYnV0dG9uID0gLT4gUmVhY3QuRE9NLmJ1dHRvbiBhcmd1bWVudHMuLi5cbmRpdiA9IC0+IFJlYWN0LkRPTS5kaXYgYXJndW1lbnRzLi4uXG5oMSA9IC0+IFJlYWN0LkRPTS5oMSBhcmd1bWVudHMuLi5cbmgyID0gLT4gUmVhY3QuRE9NLmgyIGFyZ3VtZW50cy4uLlxuaDMgPSAtPiBSZWFjdC5ET00uaDMgYXJndW1lbnRzLi4uXG5oNCA9IC0+IFJlYWN0LkRPTS5oNCBhcmd1bWVudHMuLi5cbmg1ID0gLT4gUmVhY3QuRE9NLmg1IGFyZ3VtZW50cy4uLlxuaDYgPSAtPiBSZWFjdC5ET00uaDYgYXJndW1lbnRzLi4uXG5pY29uID0gLT4gUmVhY3QuRE9NLmkgYXJndW1lbnRzLi4uXG5pbnB1dCA9IC0+IFJlYWN0LkRPTS5pbnB1dCBhcmd1bWVudHMuLi5cbnAgPSAtPiBSZWFjdC5ET00ucCBhcmd1bWVudHMuLi5cbnNwYW4gPSAtPiBSZWFjdC5ET00uc3BhbiBhcmd1bWVudHMuLi5cbnRhYmxlID0gLT4gUmVhY3QuRE9NLnRhYmxlIGFyZ3VtZW50cy4uLlxudGJvZHkgPSAtPiBSZWFjdC5ET00udGJvZHkgYXJndW1lbnRzLi4uXG50ZCA9IC0+IFJlYWN0LkRPTS50ZCBhcmd1bWVudHMuLi5cbnRoID0gLT4gUmVhY3QuRE9NLnRoIGFyZ3VtZW50cy4uLlxudGhlYWQgPSAtPiBSZWFjdC5ET00udGhlYWQgYXJndW1lbnRzLi4uXG50ciA9IC0+IFJlYWN0LkRPTS50ciBhcmd1bWVudHMuLi5cbnN0cm9uZyA9IC0+IFJlYWN0LkRPTS5zdHJvbmcgYXJndW1lbnRzLi4uXG5cbndpbmRvdy5mYWNlYm9va0Nvbm5lY3QgPSAtPlxuICBGLmNvbm5lY3QgJCgnI2ZhY2Vib29rRm9ybScpLmdldCgwKVxuICBmYWxzZVxuXG53aW5kb3cudXdhcGkgPSBcbiAgY291cnNlSW5mbzogd2luZG93LmRhdGEuY291cnNlSW5mb3x8e30sXG4gIGdldENvdXJzZTogKHN1YmplY3QsIGNhdGFsb2dfbnVtYmVyLCBjYWxsYmFjayktPlxuICAgIGNvdXJzZSA9IHt9XG4gICAgdGhhdCA9IHRoaXNcbiAgICAkLmdldEpTT04oXCIvY291cnNlL1wiK3N1YmplY3QrXCIvXCIrY2F0YWxvZ19udW1iZXIsIChjb3Vyc2UpLT5cbiAgICAgICAgaWYgbm90IGNvdXJzZVxuICAgICAgICAgIGNhbGxiYWNrKG51bGwpXG4gICAgICAgIGNvbnNvbGUubG9nIGNvdXJzZVxuICAgICAgICBpZiBjb3Vyc2UucHJlcmVxdWlzaXRlcyYmY291cnNlLnByZXJlcXVpc2l0ZXMuc3Vic3RyKDAsNyk9PVwiUHJlcmVxOlwiXG4gICAgICAgICAgY291cnNlLnByZXJlcXVpc2l0ZXM9Y291cnNlLnByZXJlcXVpc2l0ZXMuc3Vic3RyKDgpXG4gICAgICAgIGNvdXJzZS5uYW1lPWdldENvdXJzZU5hbWUoY291cnNlKVxuICAgICAgICB0aGF0LmNvdXJzZUluZm9bY291cnNlLm5hbWVdPWNvdXJzZVxuICAgICAgICBjYWxsYmFjayhjb3Vyc2UubmFtZSlcbiAgICApLmZhaWwoLT4gY2FsbGJhY2sobnVsbCkpXG4gIGdldEluZm86IChjb3Vyc2UpLT5cbiAgICBAY291cnNlSW5mb1tnZXRDb3Vyc2VOYW1lKGNvdXJzZSldXG5cbndpbmRvdy5nZXRDb3Vyc2VOYW1lID0gKG9iaikgLT4gXG4gIG9iai5zdWJqZWN0ICsgb2JqLmNhdGFsb2dfbnVtYmVyXG5cbndpbmRvdy5jYWxjdWxhdGVUZXJtID0gKHN0YXJ0WWVhciwgc3RhcnRUZXJtLCBpKSAtPlxuICBzdGFydFllYXIgPSBzdGFydFllYXIgKyBNYXRoLmZsb29yKChzdGFydFRlcm0gKyBpKSAvIDMpXG4gIHN0YXJ0VGVybSA9IChzdGFydFRlcm0gKyBpKSAlIDNcbiAgc3dpdGNoIHN0YXJ0VGVybVxuICAgIHdoZW4gMCB0aGVuIHN0YXJ0WWVhciArIFwiIFdpbnRlclwiXG4gICAgd2hlbiAxIHRoZW4gc3RhcnRZZWFyICsgXCIgU3ByaW5nXCJcbiAgICB3aGVuIDIgdGhlbiBzdGFydFllYXIgKyBcIiBGYWxsXCJcblxud2luZG93LmdldFRlcm1OYW1lQXJyYXkgPSAodGVybXNfb2ZmZXJlZCkgLT5cbiAgdGVybXNfb2ZmZXJlZC5tYXAgKGkpIC0+XG4gICAgc3dpdGNoIGlcbiAgICAgIHdoZW4gXCJGXCIgdGhlbiBcIkZhbGxcIlxuICAgICAgd2hlbiBcIldcIiB0aGVuIFwiV2ludGVyXCJcbiAgICAgIGVsc2UgXCJTcHJpbmdcIlxuXG5cbndpbmRvdy5FZGl0TGFiZWwgPSBSZWFjdC5jcmVhdGVDbGFzc1xuICBnZXRJbml0aWFsU3RhdGU6IC0+XG4gICAgbG9hZGluZzpub1xuICAgIHRleHQ6QHByb3BzLmluaXRpYWxWYWx1ZVxuICBoYW5kbGVDaGFuZ2U6IChlKSAtPlxuICAgIEBzZXRTdGF0ZSB0ZXh0OiBlLnRhcmdldC52YWx1ZVxuICBlbmRFZGl0OiAoZSkgLT5cbiAgICBAc2V0U3RhdGVcbiAgICAgIGxvYWRpbmc6IHllc1xuICAgICQuYWpheFxuICAgICAgdXJsOlwiL3NhdmUvXCIrZGF0YS5jb3Vyc2VQbGFuSWQrXCIvXCJcbiAgICAgIHR5cGU6XCJwb3N0XCJcbiAgICAgIGRhdGFUeXBlOlwianNvblwiXG4gICAgICBkYXRhOlxuICAgICAgICBuYW1lOkBzdGF0ZS50ZXh0LFxuICAgICAgICBjc3JmbWlkZGxld2FyZXRva2VuOmRhdGEuY3NyZl90b2tlblxuICAgICAgc3VjY2VzczooanNvbik9PlxuICAgICAgICBpZiBqc29uLnN1Y2Nlc3NcbiAgICAgICAgICBAc2V0U3RhdGUgbG9hZGluZzpub1xuICAgICAgICBlbHNlIGlmIGpzb24ubmFtZVxuICAgICAgICAgIEBzZXRTdGF0ZSB0ZXh0Ompzb24ubmFtZSwgbG9hZGluZzpub1xuICAgICAgICBlbHNlXG4gICAgICAgICAgYWxlcnQoXCJGYWlsZWQgdG8gc2F2ZVwiKVxuICAgICAgZXJyb3I6KCk9PlxuICAgICAgICBhbGVydChcIkZhaWxlZCB0byBzYXZlXCIpXG4gIHJlbmRlcjogLT5cbiAgICBpbnB1dFByb3AgPVxuICAgICAgcmVmOiBcImlucHV0XCJcbiAgICAgIGNsYXNzTmFtZTpcImZvcm0tY29udHJvbCBlZGl0bGFiZWxcIlxuICAgICAgdmFsdWU6QHN0YXRlLnRleHRcbiAgICAgIG9uQ2hhbmdlOkBoYW5kbGVDaGFuZ2VcbiAgICAgIG9uQmx1cjpAZW5kRWRpdFxuICAgIGlmIEBzdGF0ZS5sb2FkaW5nXG4gICAgICBpbnB1dFByb3AuZGlzYWJsZWQgPSB5ZXNcbiAgICBpbnB1dChpbnB1dFByb3ApXG5cblxuUHJldmlldyA9IFJlYWN0LmNyZWF0ZUNsYXNzXG4gIGdldEluaXRpYWxTdGF0ZTogLT5cbiAgICB0b3A6MFxuICAgIGxlZnQ6MFxuICAgIGh0bWw6XCJcIlxuICAgIHNob3c6bm9cbiAgY29tcG9uZW50RGlkTW91bnQ6ICgpIC0+XG4gICAgJCh3aW5kb3cpLm9uICdtb3VzZW1vdmUnLCBAaGFuZGxlTW91c2VNb3ZlXG4gICAgd2luZG93LnNob3dQcmV2aWV3ID0gQHNob3dQcmV2aWV3XG4gICAgd2luZG93LnNob3dDb3Vyc2VQcmV2aWV3ID0gQHNob3dDb3Vyc2VQcmV2aWV3XG4gICAgd2luZG93LmhpZGVQcmV2aWV3ID0gQGhpZGVQcmV2aWV3XG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiAoKSAtPlxuICAgICQod2luZG93KS5vZmYgJ21vdXNlbW92ZScsIEBoYW5kbGVNb3VzZU1vdmVcbiAgaGFuZGxlTW91c2VNb3ZlOihlKS0+XG4gICAgaWYgQHN0YXRlLnNob3dcbiAgICAgIEBzZXRTdGF0ZVxuICAgICAgICB0b3A6ZS5jbGllbnRZKzIwXG4gICAgICAgIGxlZnQ6ZS5jbGllbnRYKzE1XG4gIHNob3dDb3Vyc2VQcmV2aWV3OiAoY291cnNlKT0+XG4gICAgY291cnNlID0gdXdhcGkuZ2V0SW5mbyBjb3Vyc2VcbiAgICBodG1sID0gXG4gICAgICBkaXYobnVsbCxcbiAgICAgICAgaDMobnVsbCxcbiAgICAgICAgICBzdHJvbmcobnVsbCwgY291cnNlLm5hbWUpLFxuICAgICAgICAgIFwiIC0gXCIsXG4gICAgICAgICAgY291cnNlLnRpdGxlKSxcbiAgICAgICAgcChudWxsLCBjb3Vyc2UuZGVzY3JpcHRpb24pXG4gICAgICAgIHAobnVsbCxcbiAgICAgICAgICBzdHJvbmcobnVsbCwgXCJBbnRpcmVxOiBcIiksXG4gICAgICAgICAgY291cnNlLmFudGlyZXF1aXNpdGV8fFwibm9uZVwiKSxcbiAgICAgICAgcChudWxsLFxuICAgICAgICAgIHN0cm9uZyhudWxsLCBcIlByZXJlcTogXCIpLFxuICAgICAgICAgIGNvdXJzZS5wcmVyZXF1aXNpdGVzfHxcIm5vbmVcIiksXG4gICAgICAgIHAobnVsbCxcbiAgICAgICAgICBzdHJvbmcobnVsbCwgXCJUZXJtcyBvZmZlcmVkOiBcIiksXG4gICAgICAgICAgZ2V0VGVybU5hbWVBcnJheShjb3Vyc2UudGVybXNfb2ZmZXJlZCkuam9pbihcIiwgXCIpKSlcbiAgICBAc2hvd1ByZXZpZXcgaHRtbFxuICBzaG93UHJldmlldzogKGRhdGEpIC0+XG4gICAgQHNldFN0YXRlIFxuICAgICAgaHRtbDpkYXRhXG4gICAgICBzaG93Onllc1xuICBoaWRlUHJldmlldzogLT5cbiAgICBAc2V0U3RhdGUgc2hvdzpub1xuICByZW5kZXI6IC0+XG4gICAgZGl2KHtcbiAgICAgIGNsYXNzTmFtZTogXCJwcmV2aWV3IFwiKyhpZiBAc3RhdGUuc2hvdyB0aGVuIFwiIHNob3dcIiBlbHNlIFwiXCIpXG4gICAgICBzdHlsZTpcbiAgICAgICAgdG9wOkBzdGF0ZS50b3BcbiAgICAgICAgbGVmdDpAc3RhdGUubGVmdFxuICAgICAgfSwgQHN0YXRlLmh0bWwpXG5cbiQoLT5cbiAgJCgnYm9keScpLmFwcGVuZCAkKFwiPGRpdiBpZD0ncHJldmlldyc+PC9kaXY+XCIpXG4gIFJlYWN0LnJlbmRlckNvbXBvbmVudCBQcmV2aWV3KG51bGwpLCAkKFwiI3ByZXZpZXdcIikuZ2V0KDApXG4pXG5cbiJdfQ==
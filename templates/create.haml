- load form_group


#createmodal.modal.fade{:tabindex => "-1"}
  .modal-dialog
    .modal-content
      .modal-header
        %button.close{:data-dismiss => "modal", :type => "button"} &times;
        %h3.modal-title Create new schedule
      .modal-body
        %form#createForm{:action => "{{request.path}}", :method => "POST"}
          -csrf_token
          - form_group form.name 
          - form_group form.share label="Share to public" tooltip_string="if checked, this schedule will be viewable by everyone"
      .paper-btn-group.btn-group
        %a.btn.btn-primary.btn-lg{:onclick => "$(\"#createForm\").submit()", :type => "button"} Create
        %a.btn.btn-default.btn-lg{:data-dismiss => "modal", :type => "button"} Close


  :javascript
    $(function(){
      $("#createmodal").modal('show')
      $("#createForm").ajaxForm({
        success:function(data){
          try{
            console.log(data,!JSON.parse(data).success)
            if(!JSON.parse(data).success){
              $("#createmodal").on('hidden.bs.modal',function(){
                $("#modalContainer").html(data)
              })
              $("#createmodal").modal('hide')
            }else{
              window.location.href = JSON.parse(data).url
            }
          }catch(err){
            $("#createmodal").on('hidden.bs.modal',function(){
              $("#modalContainer").html(data)
            })
            $("#createmodal").modal('hide')
          }
        }
      })
    })